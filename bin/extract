#!/bin/sh

if [ $# -eq 0 ]; then
  echo "Usage: $0 <archive> [archive...]" >&2
  exit 1
fi

for f in "$@"; do
  if [ ! -f "$f" ]; then
    echo "Error: '$f' is not a valid file" >&2
    continue
  fi

  case "$f" in
    *.tar.bz2) tar xjf "$f" ;;
    *.tar.gz) tar xzf "$f" ;;
    *.tbz2) tar xjf "$f" ;;
    *.tgz) tar xzf "$f" ;;
    *.tar) tar xf "$f" ;;
    *.bz2) bunzip2 "$f" ;;
    *.gz) gunzip "$f" ;;
    *.zip) unzip "$f" ;;
    *.rar) unrar x "$f" ;;
    *.7z) 7z x "$f" ;;
    *) echo "Warning: '$f' cannot be extracted automatically" >&2 ;;
  esac
done
